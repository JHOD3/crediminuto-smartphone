!function(e,t,n,i){t.addEventListener("dragover",function(e){(e=e||event).preventDefault()},!1),t.addEventListener("drop",function(e){(e=e||event).preventDefault()},!1);const a=(e,t,n)=>{if(e.length<2&&"*"===e[0])return!0;for(let i=1;i<e.length;i+=3){if("*"===e[i+1]&&-1!=t.search(new RegExp(e[i])))return!0;if(e[i+1]&&"*"!=e[i+1]&&-1!=t.search(new RegExp("\\*"+e[i+1]+"\\*")))return!0;if(e[i+1]&&"*"!=e[i+1]&&-1!=t.search(new RegExp(e[i+1])))return!0;if(""===e[i+1]&&(-1!=t.search(new RegExp(e[i]))||-1!=n.search(new RegExp(e[i]))))return!0}return!1};e.fn.imageuploadify=function(n){e.extend({},e.fn.imageuploadify.defaults,n);return this.each(function(){const n=this;let i=e(n).attr("accept")?e(n).attr("accept").replace(/\s/g,"").split(","):null,s=[],o=[],l=0,r=e('\n      <div class="imageuploadify well" id="well">\n        <div class="imageuploadify-overlay">\n          <i class="fa fa-picture-o"></i>\n        </div>\n        <div class="imageuploadify-images-list text-center" style="line-height: 15px !important;margin: 0px 20px;">\n          \n          \n        </div>\n        <div class="imageuploadify-images-list-btn d-flex m-auto align-items-center" id="imageuploadify-images-list-btn" >\n          <a type="button" id="btn-agregar-mas" class="btn-floating btn-sm btn-success" style="background: #15ea84;box-shadow: none;padding-top: 8px;margin: 0 13px 0px 0px;"><i class="fas fa-plus" style="line-height: 21px!important;color: rgb(255, 255, 255);"></i></a>\n          <span class=\'imageuploadify-message text-muted border-0 font14-px text-left\' style="line-height: 16px;" id="texto-agregar">Selecciona tus <br> archivos JPG o PNG</span>\n        </div>\n        \n      </div>\n      '),d=r.find(".imageuploadify-overlay"),p=(r.find(".imageuploadify-overlay i"),r.find(".imageuploadify-images-list")),c=r.find(".imageuploadify-images-list i"),f=r.find(".imageuploadify-images-list span"),g=r.find(".imageuploadify-images-list-btn a");const u=t=>{for(let l=0;l<t.length;++l)if(!i||a(s,t[l].type,/(?:\.([^.]+))?$/.exec(t[l].name)[1])){const i=Math.random().toString(36).substr(2,9);e(".btn-continuar").prop("disabled",!1),e(".btn-continuar").addClass("btn-danger").removeClass("btn-light disabled"),e(n).attr("multiple")||e(".imageuploadify-images-list-btn").addClass("d-none").removeClass("d-flex"),m(i,t[l]),o.push({id:i,file:t[l]})}},m=(t,i)=>{const a=new FileReader,s=r.width(),l=Math.floor(s/100),d=Math.floor((s-100*l)/(l+1));let c=e(`<div class='imageuploadify-container mb-0'>\n          <button type='button' class='btn btn-danger glyphicon glyphicon-remove'><i class="fas fa-times" style="font-size: 12px;margin: -6px;"></i></button>\n          <div class='imageuploadify-details'>\n            <span class="d-flex text-muted" style="width: 160px;"><i class="fas fa-check text-success mr-2" style="font-size: 12px;margin-top: 2px;"></i> ${i.name}</span>\n          </div>\n        </div>`),f=(c.find(".imageuploadify-details"),c.find("button"));if(i.type&&-1!=i.type.search(/image/))a.onloadend=function(t){let n=e("<img>");c.append(n),p.append(c),e("#texto-agregar").text("AÃ±ade otro archivo"),e("#well").css({"padding-top":" 20px"}),e("#imageuploadify-images-list-btn").removeClass("m-auto").addClass("ml-3"),e("#imageuploadify-images-list-btn").css("margin","20px"),e("#imageuploadify-images-list-btn a").removeClass("btn-success"),e(".btn-floating i").css({"font-size":"10px",color:"rgb(21, 234, 132) !important","margin-left":"-1px",color:"rgb(21, 234, 132)"}),e(".btn-floating").css({width:"25px",height:"25px","padding-top":"0px",background:"none",border:"1px solid #15EA84"}),e(".btn-continuar").prop("disabled",!1),e(".btn-continuar").addClass("btn-danger").removeClass("btn-light disabled")};else if(i.type){let t="<i class='fa fa-file'></i>";-1!=i.type.search(/audio/)?t="<i class='fa fa-file-audio-o'></i>":-1!=i.type.search(/video/)&&(t="<i class='fa fa-file-video-o'></i>"),a.onloadend=function(n){let i=e("<span>"+t+"</span>");i.css("font-size","5em"),c.append(i),p.append(c),p.find(".imageuploadify-container:nth-child("+l+"n+4)").css("margin-left",d+"px"),p.find(".imageuploadify-container:nth-child("+l+"n+3)").css("margin-right",d+"px")}}f.on("click",function(){e(this.parentElement).remove();for(let i=0;o.length>i;++i)if(o[i].id===t){i<1?(e(".btn-continuar").prop("disabled",!0),e(".btn-continuar").addClass("btn-light disabled").removeClass("btn-danger"),e(n).attr("multiple")||e(".imageuploadify-images-list-btn").addClass("d-flex").removeClass("d-none")):(e(".btn-continuar").prop("disabled",!1),e(".btn-continuar").addClass("btn-danger").removeClass("btn-light disabled"),e(n).attr("multiple")||e(".imageuploadify-images-list-btn").addClass("d-none").removeClass("d-flex")),o.splice(i,1);break}}),a.readAsDataURL(i)},b=()=>{d.css("display","none"),r.css("border-color","rgb(210, 210, 210)"),g.css("pointer-events","initial"),f.css("pointer-events","initial"),c.css("pointer-events","initial"),p.css("pointer-events","initial")};g.on("click",function(t){t.stopPropagation(),t.preventDefault(),e(n).click()}),r.on("dragenter",function(e){e.stopPropagation(),e.preventDefault(),l++,d.css("display","flex"),r.css("border-color","#3AA0FF"),g.css("pointer-events","none"),f.css("pointer-events","none"),c.css("pointer-events","none"),p.css("pointer-events","none")}),r.on("dragleave",function(e){e.stopPropagation(),e.preventDefault(),0===--l&&b()}),r.on("drop",function(e){e.stopPropagation(),e.preventDefault(),b();const t=e.originalEvent.dataTransfer.files;u(t)}),e(t).bind("resize",function(n){t.resizeEvt,e(t).resize(function(){clearTimeout(t.resizeEvt),t.resizeEvt=setTimeout(function(){const t=r.width(),n=Math.floor(t/100),i=Math.floor((t-100*n)/(n+1));let a=p.find(".imageuploadify-container");for(let t=0;t<a.length;++t)e(a[t]).css("margin-right","0px"),e(a[t]).css("margin-left",i+"px");p.find(".imageuploadify-container:nth-child("+n+"n+4)").css("margin-left",i+"px"),p.find(".imageuploadify-container:nth-child("+n+"n+3)").css("margin-right",i+"px")},500)})}),e(n).on("change",function(){const e=this.files;u(e)}),e(n).closest("form").on("submit",function(i){i.stopPropagation(),i.preventDefault(i);const a=this.querySelectorAll("input, textarea, select, button"),s=new FormData;console.log(a);for(let t=0;t<a.length;++t)if("SELECT"===a[t].tagName&&a[t].hasAttribute("multiple")){const e=a[t].options;for(let n=0;e.length>n;++n)e[n].selected&&s.append(a[t].getAttribute("name"),e[n].value)}else!a[t].getAttribute("type")||"checkbox"!==a[t].getAttribute("type").toLowerCase()&&"radio"!==a[t].getAttribute("type").toLowerCase()||a[t].checked?(console.log("aqui"),s.append(a[t].name,a[t].value)):"file"!=e(a[t]).getAttribute("type")&&s.append(a[t].name,a[t].value);for(var l=0;l<o.length;l++)s.append(n.name,o[l].file);var r=new XMLHttpRequest;return r.onreadystatechange=function(e){200==r.status&&r.readyState===XMLHttpRequest.DONE&&t.location.replace(r.responseURL)},r.open("POST",e(this).attr("action"),!0),r.send(s),!1}),e(n).hide(),r.insertAfter(this)}),this},e.fn.imageuploadify.defaults={}}(jQuery,window,document);